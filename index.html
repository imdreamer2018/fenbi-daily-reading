<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>File Tree</title>
<style>
    body {
        font-family: Arial, sans-serif;
    }

    #file-tree {
        border: 1px solid #ddd;
        padding: 20px;
    }

    #file-tree ul {
        list-style-type: none;
        padding-left: 20px;
        margin-top: 0;
        margin-bottom: 0;
    }

    #file-tree li {
        margin: 5px 0;
        position: relative;
        padding-left: 20px;
        cursor: pointer;
    }

    #file-tree li.folder > ul {
        display: none; /* 默认隐藏子目录 */
    }

    #file-tree li.folder.open > ul {
        display: block; /* 展开状态显示子目录 */
    }

    #file-tree li.folder::before {
        content: '▶'; /* 默认为闭合状态的图标 */
        margin-right: 5px;
        position: absolute;
        left: 0;
    }

    #file-tree li.folder.open::before {
        content: '▼'; /* 展开状态的图标 */
    }

    /* 文件夹和文件的样式 */
    #file-tree li.file {
        cursor: default;
    }

    #file-tree li.file::before {
        content: '📄';
        margin-right: 5px;
        position: absolute;
        left: 0;
    }
</style>
</head>
<body>

<h1>仅个人使用，侵权必删！</h1>
<h2>目录</h2>

<div id="file-tree"></div>

<script>
    fetch('file_list_tree.json')
        .then(response => response.json())
        .then(files => {
            const tree = createFileTree(files);
            document.getElementById('file-tree').appendChild(tree);
        });

    function createFileTree(files) {
        const root = document.createElement('ul');

        function addFilesToTree(parent, fileList) {
            fileList.forEach(file => {
                const parts = file.split('/');
                const item = document.createElement('li');
                item.textContent = parts[parts.length - 1] || parts[parts.length - 2];
                item.classList.add(parts.length > 1 ? 'folder' : 'file');

                if (parts.length > 1) {
                    const subList = document.createElement('ul');
                    const subFiles = files.filter(f => f.startsWith(file) && f !== file);
                    addFilesToTree(subList, subFiles);
                    item.appendChild(subList);
                    item.addEventListener('click', function(event) {
                        event.stopPropagation();
                        item.classList.toggle('open');
                    });
                } else {
                    item.removeEventListener('click', function(event) {
                        event.stopPropagation();
                    });
                }

                parent.appendChild(item);
            });
        }

            addFilesToTree(root, files.filter(file => !file.includes('/')));
            return root;
        }

        const fileTree = createFileTree(files);
        document.getElementById('file-tree').appendChild(fileTree);    

</script>

</body>
</html>
